<mat-expansion-panel class="player-expansion-panel" [class.open]="isOpen()" (opened)="isOpen.set(true)" (closed)="isOpen.set(false)">
  <mat-expansion-panel-header>
    <mat-panel-title>
      <div class="header-content">
        <span *ngIf="rank !== undefined && rank !== null" class="player-rank">{{ rank }}</span>
        <button *ngIf="!rank && removable" class="remove-btn" mat-icon-button type="button" (click)="remove.emit(); $event.stopPropagation();" aria-label="Remove player">
          <mat-icon>close</mat-icon>
        </button>
        <span class="player-name">{{ player?.name }}</span>
        <span class="player-value" matTooltip="Value relative to other assets" matTooltipShowDelay="500">{{ value | number:'1.2-2' }}</span>
      </div>
    </mat-panel-title>
  </mat-expansion-panel-header>
  <div class="player-details-grid">
    <span class="stat-label highlight">FPPG</span><span class="stat-value highlight">{{player?.fantasy_pts | number:'1.2-2'}}</span>
    <span class="stat-label highlight">Age</span><span class="stat-value highlight">{{player?.age}}</span>
    <span class="stat-label highlight">Position</span><span class="stat-value highlight">{{player?.position}}</span>
    <span class="stat-label">Team</span><span class="stat-value">{{player?.team}}</span>
    <span class="stat-label">PTS</span><span class="stat-value">{{player?.pts}}</span>
    <span class="stat-label">REB</span><span class="stat-value">{{player?.rebs}}</span>
    <span class="stat-label">AST</span><span class="stat-value">{{player?.ast}}</span>
    <span class="stat-label">STL</span><span class="stat-value">{{player?.stl}}</span>
    <span class="stat-label">BLK</span><span class="stat-value">{{player?.blk}}</span>
    <span class="stat-label">3PM</span><span class="stat-value">{{player?.fg3m}}</span>
    <span class="stat-label">TOV</span><span class="stat-value">{{ player?.tov }}</span>
    <span class="stat-label">FG%</span><span class="stat-value">{{ getFgPercent(player) }}</span>
  </div>
</mat-expansion-panel>